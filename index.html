<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban –î–æ—Å–∫–∞</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-rocket"></i> Kanban –î–æ—Å–∫–∞</h1>
            <div class="user-selector">
                <label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</label>
                <select id="userSelect" onchange="switchUser()">
                    <option value="maxim">üë®‚Äçüíº –ú–∞–∫—Å–∏–º</option>
                    <option value="mark">üë®‚Äçüíª –ú–∞—Ä–∫</option>
                </select>
            </div>
        </header>

        <!-- –í–∫–ª–∞–¥–∫–∏ -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('personal')" data-tab="personal">
                <i class="fas fa-user"></i> –ú–æ–∏ –∑–∞–¥–∞—á–∏
            </button>
            <button class="tab-btn" onclick="switchTab('all')" data-tab="all">
                <i class="fas fa-users"></i> –í—Å–µ –∑–∞–¥–∞—á–∏
            </button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –ú–æ–∏ –∑–∞–¥–∞—á–∏ -->
        <div class="tab-content active" id="personal-tab">
            <div class="kanban-board">
                <div class="column" data-status="todo">
                    <div class="column-header">
                        <h3><i class="fas fa-list"></i> –ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('todo')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="column" data-status="in-progress">
                    <div class="column-header">
                        <h3><i class="fas fa-spinner"></i> –í —Ä–∞–±–æ—Ç–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('in-progress')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="column" data-status="review">
                    <div class="column-header">
                        <h3><i class="fas fa-eye"></i> –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('review')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="column" data-status="done">
                    <div class="column-header">
                        <h3><i class="fas fa-check-circle"></i> –ó–∞–≤–µ—Ä—à–µ–Ω–æ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('done')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –í—Å–µ –∑–∞–¥–∞—á–∏ -->
        <div class="tab-content" id="all-tab">
            <div class="kanban-board">
                <div class="column" data-status="todo">
                    <div class="column-header">
                        <h3><i class="fas fa-list"></i> –ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('todo')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="column" data-status="in-progress">
                    <div class="column-header">
                        <h3><i class="fas fa-spinner"></i> –í —Ä–∞–±–æ—Ç–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('in-progress')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="column" data-status="review">
                    <div class="column-header">
                        <h3><i class="fas fa-eye"></i> –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('review')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>

                <div class="column" data-status="done">
                    <div class="column-header">
                        <h3><i class="fas fa-check-circle"></i> –ó–∞–≤–µ—Ä—à–µ–Ω–æ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="task-list" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- –ó–∞–¥–∞—á–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    </div>
                    <button class="add-task-btn" onclick="openAddTaskModal('done')">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <form id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                    <input type="text" id="taskTitle" required>
                </div>
                <div class="form-group">
                    <label for="taskDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="taskDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="taskPriority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="taskPriority">
                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                        <option value="urgent">–°—Ä–æ—á–Ω—ã–π</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="taskStatus">–°—Ç–∞—Ç—É—Å</label>
                    <select id="taskStatus">
                        <option value="todo">–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</option>
                        <option value="in-progress">–í —Ä–∞–±–æ—Ç–µ</option>
                        <option value="review">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</option>
                        <option value="done">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á–∏ -->
    <div id="viewTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á–∏</h2>
                <span class="close" onclick="closeViewModal()">&times;</span>
            </div>
            <div id="taskDetails">
                <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
            <div class="form-actions">
                <button type="button" onclick="closeViewModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button type="button" onclick="editCurrentTask()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button type="button" onclick="deleteCurrentTask()" class="btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 